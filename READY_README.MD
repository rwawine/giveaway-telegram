## Telegram Bot + Web Admin ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∑–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Ä–æ–∑—ã–≥—Ä—ã—à, —Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ –±–∞–∑–µ, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏, –ø—Ä–æ–≤–æ–¥–∏—Ç—å —á–µ—Å—Ç–Ω—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É. –í–µ–±-–∞–¥–º–∏–Ω–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∑–∞–ø—É—Å–∫
- **–Ø–¥—Ä–æ**: Telegram-–±–æ—Ç –Ω–∞ `pyTelegramBotAPI` (long polling) + Flask –≤–µ–±-–∞–¥–º–∏–Ω–∫–∞.
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: `SQLite` —Ñ–∞–π–ª `applications.db`.
- **–§–∞–π–ª—ã**: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ ‚Äî `photos/`, —ç–∫—Å–ø–æ—Ä—Ç—ã ‚Äî `exports/`, –ª–æ–≥–∏ ‚Äî `bot.log`.
- **–ó–∞–ø—É—Å–∫**: `python main.py` ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ—Ç –≤–µ–±-–∞–¥–º–∏–Ω–∫—É (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ) –∏ –±–æ—Ç–∞ (–≤ –≥–ª–∞–≤–Ω–æ–º).
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª `bot.log`.

–°—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏:
- `main.py`
  - `init_database()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
  - –ø–æ—Ç–æ–∫ `start_web_app()` ‚Äî Flask (`0.0.0.0:5000`)
  - `start_bot()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ (infinity_polling)

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `bot/telegram_bot.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥, —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ–ª–±—ç–∫–æ–≤, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
- `web/admin_panel.py` ‚Äî Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, API-—Ä–æ—É—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `web/templates/*.html` ‚Äî —à–∞–±–ª–æ–Ω—ã –∞–¥–º–∏–Ω–∫–∏ (`Jinja2`)
- `database/db_manager.py` ‚Äî —Å—Ö–µ–º–∞, CRUD, —É—Ç–∏–ª–∏—Ç—ã –ë–î, –∞–Ω—Ç–∏—Ñ—Ä–æ–¥-–ø–æ–º–æ—â–Ω–∏–∫–∏
- `utils/` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç, –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, —Ä–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä
- `config.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–Ω–æ–ø–∫–∏
- `scripts/seed_applications.py` ‚Äî –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `tests/test_antifraud.py` ‚Äî –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. `config.py`), –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ `.env`:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
- `ADMIN_PASSWORD` ‚Äî –ø–∞—Ä–æ–ª—å –≤—Ö–æ–¥–∞ –≤ –≤–µ–±-–∞–¥–º–∏–Ω–∫—É
- `WEB_PORT` ‚Äî –ø–æ—Ä—Ç Flask (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5000)
- `WEB_BASE_URL` ‚Äî –±–∞–∑–æ–≤—ã–π URL –∞–¥–º–∏–Ω–∫–∏, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω ‚Äî –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É IP –∏ `WEB_PORT`
- `ADMIN_IDS` ‚Äî —Å–ø–∏—Å–æ–∫ Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é), –Ω–∞–ø—Ä.: `123,456789`
- –ê–Ω—Ç–∏—Ñ–ª—É–¥/—Ä–∞—Å—Å—ã–ª–∫–∞:
  - `BROADCAST_RATE_PER_SEC` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8)
  - `BROADCAST_MAX_RETRIES` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
  - `BROADCAST_RETRY_BASE_DELAY` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0)

–ö–∞—Ç–∞–ª–æ–≥–∏:
- `PHOTOS_DIR = photos`
- `EXPORTS_DIR = exports`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `applications.db`

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `init_database()` (`database/db_manager.py`).

### –¢–∞–±–ª–∏—Ü–∞ `applications`
- `id INTEGER PRIMARY KEY AUTOINCREMENT`
- `name TEXT NOT NULL`
- `phone_number TEXT NOT NULL UNIQUE`
- `telegram_username TEXT`
- `telegram_id INTEGER NOT NULL UNIQUE`
- `photo_path TEXT NOT NULL`
- `timestamp TEXT NOT NULL` (ISO-–¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏)
- `is_winner INTEGER DEFAULT 0`
- `photo_hash TEXT` (SHA-256 —Ñ–∞–π–ª–∞ —Ñ–æ—Ç–æ)
- `risk_score INTEGER DEFAULT 0`
- `risk_level TEXT DEFAULT 'low'` (low/medium/high)
- `risk_details TEXT` (JSON-–º–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫)
- `status TEXT DEFAULT 'pending'` (pending/approved/blocked)

–ò–Ω–¥–µ–∫—Å—ã: `telegram_id`, `phone_number`, `is_winner`.

### –¢–∞–±–ª–∏—Ü–∞ `support_tickets`
- `id INTEGER PRIMARY KEY AUTOINCREMENT`
- `user_id INTEGER NOT NULL`
- `user_name TEXT NOT NULL`
- `username TEXT`
- `message TEXT NOT NULL`
- `admin_reply TEXT`
- `status TEXT DEFAULT 'open'`
- `created_at TEXT NOT NULL DEFAULT (datetime('now'))`
- `replied_at TEXT`

–ò–Ω–¥–µ–∫—Å—ã: `user_id`, `status`.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î
- –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∑–∞—è–≤–æ–∫: `save_application`, `get_all_applications`, `get_applications_page`, `delete_application`, `application_exists`, `get_applications_count`, `get_filtered_applications_count`
- –†–æ–∑—ã–≥—Ä—ã—à: `get_random_winner`, `get_winner`, `reset_winner`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞: `create_support_ticket`, `get_support_ticket`, `reply_support_ticket`, `get_open_support_tickets`
- –ê–Ω—Ç–∏—Ñ—Ä–æ–¥/—Ä–∏—Å–∫: `update_risk`, `set_status`, `count_duplicate_photo_hash`, `count_recent_registrations`

---

## –ë–æ—Ç: –∫–æ–º–∞–Ω–¥—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∫–Ω–æ–ø–∫–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `bot/telegram_bot.py`. –ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ `create_bot()` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ `main.py`.

### –ö–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é; –µ—Å–ª–∏ –∑–∞—è–≤–∫–∞ —É–∂–µ –µ—Å—Ç—å ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–í—ã —É–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ¬ª
- `/support` ‚Äî –∑–∞–ø—É—Å–∫ –¥–∏–∞–ª–æ–≥–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–∞–Ω–∞–ª–æ–≥ –∫–Ω–æ–ø–∫–∏ ¬´‚ùì –ü–æ–¥–¥–µ—Ä–∂–∫–∞¬ª)
- `/admin` ‚Äî –≤—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è `ADMIN_IDS`), –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç inline-–º–µ–Ω—é
- `/—Å–ø–∏—Å–æ–∫` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- `/–≤—ã–±—Ä–∞—Ç—å_–ø–æ–±–µ–¥–∏—Ç–µ–ª—è` ‚Äî –≤—ã–±–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å –ø–æ–∫–∞–∑–æ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ inline-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (–∞–¥–º–∏–Ω)
- `/—ç–∫—Å–ø–æ—Ä—Ç` ‚Äî –≤—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ (CSV/Excel) —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏ (–∞–¥–º–∏–Ω)
- `/reply_{ID}` ‚Äî –∞–¥–º–∏–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ —Ç–∏–∫–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID

### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (FSM)
–û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `bot/states.py`:
- `IDLE`, `WAITING_NAME`, `WAITING_PHONE`, `WAITING_USERNAME`, `WAITING_PHOTO`
- `WAITING_SUPPORT_MESSAGE` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- `WAITING_ADMIN_REPLY` ‚Äî –∞–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Ç–∏–∫–µ—Ç
- `WAITING_BROADCAST_MESSAGE` ‚Äî –∞–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏

–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏: `user_states`, `user_data` —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏ `set_user_state`, `get_user_state`, `clear_user_state`, `set_user_data`, `get_user_data`.

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (ReplyKeyboard)
–ö–Ω–æ–ø–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ `config.KEYBOARD_BUTTONS`, –∞ —Ä–∞–∑–º–µ—Ç–∫–∞ ‚Äî –≤ `bot/keyboards.py`.
- **üéØ –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å** ‚Äî –∑–∞–ø—É—Å–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`start_application_process` ‚Üí `WAITING_NAME`)
- **üìã –ú–æ–π —Å—Ç–∞—Ç—É—Å** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) (`handle_status_check`)
- **üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏** ‚Äî —Ç–µ–∫—É—â–∏–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –∏–ª–∏ ¬´–†–æ–∑—ã–≥—Ä—ã—à –µ—â—ë –Ω–µ –ø—Ä–æ–≤–µ–¥—ë–Ω¬ª (`handle_winners_list`)
- **üìñ –û —Ä–æ–∑—ã–≥—Ä—ã—à–µ** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ (`handle_about_contest`)
- **üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å** ‚Äî —Å—Å—ã–ª–∫–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –±–æ—Ç–∞ (`handle_invite_friends`)
- **‚ùì –ü–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî –≤–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (`WAITING_SUPPORT_MESSAGE`)
- –î–æ–ø. –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ö: **‚¨ÖÔ∏è –ù–∞–∑–∞–¥**, **‚ùå –û—Ç–º–µ–Ω–∏—Ç—å** (`handle_back_button`, `handle_cancel_button`)
- –î–ª—è –∞–¥–º–∏–Ω–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç inline-–º–µ–Ω—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—à–∞–≥–∏)
1) `WAITING_NAME` ‚Äî –≤–≤–æ–¥ –∏–º–µ–Ω–∏ (`handle_name_input`)
2) `WAITING_PHONE` ‚Äî –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ (–∫–Ω–æ–ø–∫–∞ ¬´üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º¬ª –∏–ª–∏ –≤—Ä—É—á–Ω—É—é) (`handle_contact`/`handle_phone_input`)
3) `WAITING_USERNAME` ‚Äî –≤–≤–æ–¥ –Ω–∏–∫–Ω–µ–π–º–∞ –±–µ–∑ `@` (–ø—É—Å—Ç–æ ‚Äî –±–µ—Ä—ë–º –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è) (`handle_username_input`)
4) `WAITING_PHOTO` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ; –ø–æ —Ñ–æ—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è `photo_hash`, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞—è–≤–∫–∞ (`process_photo_submission`)

–†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ + –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∏—Å–∫–∞ (–Ω–∏–∑–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–≤—ã—Å–æ–∫–∏–π) –∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é.

### –ê–¥–º–∏–Ω-–º–µ–Ω—é –≤ –±–æ—Ç–µ (InlineKeyboard)
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ `get_admin_keyboard()` –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `handle_callback_queries()`:
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (`admin_stats`) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫
- **üì• –≠–∫—Å–ø–æ—Ä—Ç** (`admin_export`) ‚Äî –≤—ã–±–æ—Ä CSV/Excel, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ (`export_csv`/`export_excel`)
- **üì® –†–∞—Å—Å—ã–ª–∫–∞** (`admin_broadcast`) ‚Äî –≤—ã–±–æ—Ä: –≤—Å–µ–º / –ø–æ–±–µ–¥–∏—Ç–µ–ª—é / —Ç–µ—Å—Ç
  - –í—ã–±–æ—Ä ¬´–≤—Å–µ–º¬ª/¬´–ø–æ–±–µ–¥–∏—Ç–µ–ª—é¬ª –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∞–¥–º–∏–Ω–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `WAITING_BROADCAST_MESSAGE`, –∑–∞—Ç–µ–º —Ä–∞—Å—Å—ã–ª–∫–∞ c –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ä–µ—Ç—Ä–∞—è–º–∏
- **üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞** (`admin_support`) ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤, –∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–≤–µ—Ç–∏—Ç—å¬ª –∏ ¬´–ó–∞–∫—Ä—ã—Ç—å¬ª
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏** (`admin_settings`) ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
  - –û—á–∏—Å—Ç–∏—Ç—å –∑–∞—è–≤–∫–∏ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
  - –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–±–æ—Ç, –≤—Ä–µ–º—è, –ø–∞–ø–∫–∞)
  - –û—Ç–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã
  - –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ —Ç–∏–∫–µ—Ç—ã (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
- **üåê –í–µ–±-–∞–¥–º–∏–Ω–∫–∞** ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ `get_web_base_url()` –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –≠–∫—Å–ø–æ—Ä—Ç
- –ß–µ—Ä–µ–∑ –±–æ—Ç–∞: `/—ç–∫—Å–ø–æ—Ä—Ç` ‚Üí inline —Ñ–æ—Ä–º–∞—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞, —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- –ß–µ—Ä–µ–∑ –≤–µ–±: `/api/export/csv` –∏–ª–∏ `/api/export/excel` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤
- –§–æ—Ä–º–∞—Ç—ã:
  - CSV: –∫–æ–ª–æ–Ω–∫–∏ `ID, –ò–º—è, –¢–µ–ª–µ—Ñ–æ–Ω, Telegram, –í—Ä–µ–º—è –ø–æ–¥–∞—á–∏, –ü–æ–±–µ–¥–∏—Ç–µ–ª—å`
  - Excel: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫, –∞–≤—Ç–æ—à–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤

### –†–∞—Å—Å—ã–ª–∫–∞ (–∞–Ω—Ç–∏—Ñ–ª—É–¥)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ä–µ—Ç—Ä–∞–µ–≤ –±–µ—Ä—É—Ç—Å—è –∏–∑ `config`
- –û–±—Ö–æ–¥ Too Many Requests (429) ‚Äî —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff
- –ü—Ä–æ–ø—É—Å–∫ –æ—à–∏–±–æ–∫ 400/403 (blocked/bad request)

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —Ç–∏–∫–µ—Ç (`/support` –∏–ª–∏ ¬´‚ùì –ü–æ–¥–¥–µ—Ä–∂–∫–∞¬ª)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–º –∏–∑–≤–µ—Å—Ç–Ω—ã–º –∞–¥–º–∏–Ω–∞–º (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è + runtime)
- –ê–¥–º–∏–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥–æ–π `/reply_{ID}` –∏–ª–∏ –∏–∑ –≤–µ–±-–∞–¥–º–∏–Ω–∫–∏ (¬´–û—Ç–≤–µ—Ç–∏—Ç—å¬ª)
- –ó–∞–∫—Ä—ã—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞: –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –∏–∑ –±–æ—Ç–∞ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –≤–µ–±-–∞–¥–º–∏–Ω–∫–∏

---

## –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ –∏ —Ä–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `utils/anti_fraud.py`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –≤ –±–æ—Ç–µ (`process_photo_submission`)
- –ø—Ä–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏ (`/api/risk/recompute/<id>`) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º `risk_score`, `risk_level`, `risk_details`

### –ü—Ä–æ–≤–µ—Ä–∫–∏ (checks)
- `DeviceFingerprintCheck` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `telegram_id`; –ø–æ–≤—Ç–æ—Ä ‚Üí +40
- `PhoneValidationCheck` ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω 10‚Äì15 —Ü–∏—Ñ—Ä; –∏–Ω–∞—á–µ ‚Üí +25
- `PhotoHashCheck` ‚Äî –ø—É—Å—Ç–æ–π `photo_hash` ‚Üí +30; –¥—É–±–ª–∏–∫–∞—Ç —Ñ–æ—Ç–æ ‚Üí +60
- `BehaviorAnalysisCheck` ‚Äî –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è (<2) ‚Üí +10; –∫–æ—Ä–æ—Ç–∫–∏–π username (<3) ‚Üí +5
- `VelocityCheck` ‚Äî >30 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –∑–∞ 60 —Å–µ–∫ ‚Üí +15
- `GeoLocationCheck` ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ (0)

–ò—Ç–æ–≥–æ–≤—ã–π `risk_score` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 0..100 –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è:
- 0‚Äì30: `low`
- 31‚Äì70: `medium`
- 71‚Äì100: `high`

–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏:
- `low` ‚Üí `approved`
- `medium` ‚Üí `pending`
- `high` ‚Üí `blocked`

–í –∞–¥–º–∏–Ω–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ:
- –ü–µ—Ä–µ—Å—á—ë—Ç —Ä–∏—Å–∫–∞
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (`approved/blocked/pending`)

---

## –í–µ–±-–∞–¥–º–∏–Ω–∫–∞ (Flask)
–ö–æ–¥: `web/admin_panel.py`. –°–æ–∑–¥–∞–Ω–∏–µ ‚Äî `create_web_app()`.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `/login` (GET/POST) ‚Äî –≤—Ö–æ–¥ –ø–æ `ADMIN_PASSWORD`
- –°–µ—Å—Å–∏—è `session['authenticated'] = True`
- `/logout` ‚Äî –≤—ã—Ö–æ–¥
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `require_auth` –∑–∞—â–∏—â–∞–µ—Ç –≤—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### –ì–ª–∞–≤–Ω–∞—è (`/`)
- –î–∞—à–±–æ—Ä–¥: —á–∏—Å–ª–æ –∑–∞—è–≤–æ–∫, —Ñ–ª–∞–≥ ¬´–µ—Å—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—å¬ª, –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: ¬´–í—ã–±—Ä–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è¬ª, ¬´–≠–∫—Å–ø–æ—Ä—Ç CSV/Excel¬ª
- –ë–ª–æ–∫ ¬´–¢–µ–∫—É—â–∏–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å¬ª (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω): —Ñ–æ—Ç–æ, –∏–º—è, username, —Ç–µ–ª–µ—Ñ–æ–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞: —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫: —Ñ–æ—Ç–æ –ø—Ä–µ–≤—å—é, –∏–º—è, telegram, —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–∞—Ç–∞, —Å—Ç–∞—Ç—É—Å, —Ä–∏—Å–∫ (—Ü–≤–µ—Ç–Ω—ã–µ –±—ç–π–¥–∂–∏)
- –§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å—Ç–∞—Ç—É—Å—É (`approved/pending/blocked`) –∏ –ø–æ —Ä–∏—Å–∫—É (`low/medium/high`), –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### –ú–∞—Ä—à—Ä—É—Ç—ã API
- `GET /api/applications` ‚Äî –≤—Å–µ –∑–∞—è–≤–∫–∏ (–¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)
- `DELETE /api/delete_application/<int:application_id>` ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É
- `POST /api/select_winner` ‚Äî –≤—ã–±—Ä–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –≤–µ—Ä–Ω—É—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, seed –∏ –¥–∞–Ω–Ω—ã–µ (–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –≤ –ë–î)
- `GET /api/export/<format>` ‚Äî `csv` –∏–ª–∏ `excel`, –æ—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
- `GET /photo/<filename>` ‚Äî –æ—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª —Ñ–æ—Ç–æ –ø–æ –∏–º–µ–Ω–∏
- `GET /api/stats` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
  - `POST /api/add_user` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, username)
  - `POST /api/edit_user/<int:user_id>` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å
  - `GET /api/get_user/<int:user_id>` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
  - `GET /api/support/tickets` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö
  - `GET /api/support/ticket/<int:ticket_id>` ‚Äî –æ–¥–∏–Ω —Ç–∏–∫–µ—Ç
  - `POST /api/support/reply` ‚Äî –æ—Ç–≤–µ—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–∏ –∑–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç)
  - `POST /api/support/close` ‚Äî –∑–∞–∫—Ä—ã—Ç—å –±–µ–∑ –æ—Ç–≤–µ—Ç–∞
- –ê–Ω—Ç–∏—Ñ—Ä–æ–¥:
  - `POST /api/risk/recompute/<int:user_id>` ‚Äî –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ä–∏—Å–∫, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
  - `POST /api/risk/status/<int:user_id>` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏

### –®–∞–±–ª–æ–Ω—ã (Jinja2)
- `base.html`
  - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç Tailwind, Bootstrap, Font Awesome
  - –õ–µ–π–∞—É—Ç: —Å–∞–π–¥–±–∞—Ä (–î–∞—à–±–æ—Ä–¥, –ó–∞—è–≤–∫–∏, –ü–æ–¥–¥–µ—Ä–∂–∫–∞), —Ç–æ–ø–±–∞—Ä, `block content`
  - JS: –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
- `admin_panel.html`
  - `block content`: –¥–∞—à–±–æ—Ä–¥, –ø–æ–±–µ–¥–∏—Ç–µ–ª—å, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Ç–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫
  - –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞: —Ä–∏—Å–∫-–∞–Ω–∞–ª–∏–∑ (`riskModal`), –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ (`photoModal`), —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
  - JS-–ª–æ–≥–∏–∫–∞: —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏, —ç–∫—Å–ø–æ—Ä—Ç, –≤—ã–±–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –ø–µ—Ä–µ—Å—á—ë—Ç —Ä–∏—Å–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞, –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤, —á–∏–ø—Å—ã-—Ñ–∏–ª—å—Ç—Ä—ã, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `error.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–æ–∫
- `login.html` ‚Äî —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞

–ü–æ–ª–µ–∑–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —à–∞–±–ª–æ–Ω–æ–≤:
- –§–∏–ª—å—Ç—Ä `basename` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `create_web_app()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ —Ñ–æ—Ç–æ –≤ `<img src="/photo/{{ path | basename }}">`
- –ü—Ä–µ–≤—å—é —Ñ–æ—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ; `/photo/<filename>` –æ—Ç–¥–∞—ë—Ç JPEG
- –¶–≤–µ—Ç–æ–≤—ã–µ –±—ç–π–¥–∂–∏ —Ä–∏—Å–∫–∞ –ø–æ –ø–æ—Ä–æ–≥–∞–º 30/70

---

## –£—Ç–∏–ª–∏—Ç—ã
- `utils/file_handler.py` ‚Äî
  - `save_photo()` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ç–æ –≤ `photos/` –ø–æ —à–∞–±–ª–æ–Ω—É `user_<id>_<timestamp>.jpg`
  - `export_to_csv()` ‚Äî —Å–æ–∑–¥–∞—ë—Ç CSV –≤ `exports/`
  - `export_to_excel()` ‚Äî —Å–æ–∑–¥–∞—ë—Ç Excel —Å –∞–≤—Ç–æ—à–∏—Ä–∏–Ω–æ–π –∫–æ–ª–æ–Ω–æ–∫
  - `cleanup_old_exports()` ‚Äî –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤ (–ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è)
- `utils/anti_fraud.py` ‚Äî –∞–Ω—Ç–∏—Ñ—Ä–æ–¥ –∏ —Ä–∏—Å–∫-—Å–∫–æ—Ä–∏–Ω–≥ (—Å–º. –≤—ã—à–µ)
- `utils/randomizer.py` ‚Äî —á–µ—Å—Ç–Ω—ã–π —Ä–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä: seed –±–µ—Ä—ë—Ç—Å—è —Å `https://api.blockchain.info/q/latesthash`, –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ‚Äî —Ç–µ–∫—É—â–∏–π —á–∞—Å; –∏–∑ seed –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è

---

## –°–∫—Ä–∏–ø—Ç—ã –∏ —Ç–µ—Å—Ç—ã
- `scripts/seed_applications.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è N —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ —Ä–∏—Å–∫–∞
- `tests/test_antifraud.py` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∏–∂–Ω–∏–π –∏ –≤–µ—Ä—Ö–Ω–∏–π –∫–µ–π—Å—ã —Å–∫–æ—Ä–∏–Ω–≥–∞

---

## –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (1 –∑–∞—è–≤–∫–∞), –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞, –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π, –ø–æ–º–æ—â—å
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–∏–∑ `ADMIN_IDS`): –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–º–µ–Ω—é –±–æ—Ç–∞, —ç–∫—Å–ø–æ—Ä—Ç, —Ä–∞—Å—Å—ã–ª–∫–∏, —Ä–æ–∑—ã–≥—Ä—ã—à, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏; –≤—Ö–æ–¥ –≤ –≤–µ–±-–∞–¥–º–∏–Ω–∫—É –ø–æ –ø–∞—Ä–æ–ª—é

---

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞—è–≤–∫–∏
1) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç 4 —à–∞–≥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ ‚Üí —Ñ–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Üí —Å—á–∏—Ç–∞–µ—Ç—Å—è `photo_hash` ‚Üí –∞–Ω—Ç–∏—Ñ—Ä–æ–¥ ‚Üí –∑–∞–ø–∏—Å—å –≤ `applications`
2) –ó–∞—è–≤–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç `status` –Ω–∞ –æ—Å–Ω–æ–≤–µ `risk_score`
3) –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤ –≤–µ–±-–∞–¥–º–∏–Ω–∫–µ –º–æ–∂–µ—Ç: –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å, –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å, –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å —Ä–∏—Å–∫
4) –†–æ–∑—ã–≥—Ä—ã—à –≤ –±–æ—Ç–µ –∏–ª–∏ –≤ –≤–µ–±–µ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –∏ –º–∞—Ä–∫–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å `is_winner = 1`
5) –≠–∫—Å–ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –±–æ—Ç–∞ –∏ –∏–∑ –≤–µ–±-–∞–¥–º–∏–Ω–∫–∏

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- –ü–∞—Ä–æ–ª—å –≤–µ–±-–∞–¥–º–∏–Ω–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ê–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø –≤ –±–æ—Ç–µ ‚Äî —á–µ—Ä–µ–∑ `ADMIN_IDS`
- –¢–µ–ª–µ—Ñ–æ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π), —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ `applications.db`
- –§–æ—Ç–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `photos/`; –¥–æ—Å—Ç—É–ø –∏–∑ –≤–µ–±–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Å–µ—Å—Å–∏—è–º
- –õ–æ–≥–∏ (`bot.log`) –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª—É–∂–µ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é; –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å

---

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)
- –ü–æ—á–µ–º—É –Ω–µ –≤–∏–∂—É –∫–Ω–æ–ø–∫—É ¬´üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å¬ª?
  - –í–∞—à Telegram ID –Ω–µ –≤ `ADMIN_IDS`.
- –ù–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —ç–∫—Å–ø–æ—Ä—Ç?
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `exports/` –∏ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–µ.
- –§–æ—Ç–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ?
  - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `photos/` –∏ –∏–º—è —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä `basename`.
- –†–∏—Å–∫ –≤—Å–µ–≥–¥–∞ –≤—ã—Å–æ–∫–∏–π?
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã `photo_hash`, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É.

---

## –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
1) –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `.env` (`BOT_TOKEN`, `ADMIN_PASSWORD`, `ADMIN_IDS`, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `WEB_BASE_URL`)
2) `pip install -r requirements.txt`
3) `python main.py`
4) –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∞–¥–º–∏–Ω–∫—É: `http://<IP>:5000` (–ª–æ–≥–∏–Ω –ø–æ –ø–∞—Ä–æ–ª—é)
5) –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É `/start`; –∞–¥–º–∏–Ω ‚Äî `/admin`

---

## –ö–∞—Ä—Ç–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–Ω–æ–ø–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–∫—Ä–∞—Ç–∫–æ)
- Reply (–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é):
  - `üéØ –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å` ‚Üí `start_application_process`
  - `üìã –ú–æ–π —Å—Ç–∞—Ç—É—Å` ‚Üí `handle_status_check`
  - `üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏` ‚Üí `handle_winners_list`
  - `üìñ –û —Ä–æ–∑—ã–≥—Ä—ã—à–µ` ‚Üí `handle_about_contest`
  - `üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å` ‚Üí `handle_invite_friends`
  - `‚ùì –ü–æ–¥–¥–µ—Ä–∂–∫–∞` ‚Üí `WAITING_SUPPORT_MESSAGE` ‚Üí `handle_support_message_input`
  - `‚¨ÖÔ∏è –ù–∞–∑–∞–¥` ‚Üí `handle_back_button`, `‚ùå –û—Ç–º–µ–Ω–∏—Ç—å` ‚Üí `handle_cancel_button`
- Inline (–∞–¥–º–∏–Ω):
  - `admin_stats` ‚Üí `handle_admin_stats_callback`
  - `admin_export` ‚Üí `handle_admin_export_callback` ‚Üí `export_csv|export_excel`
  - `admin_broadcast` ‚Üí `handle_admin_broadcast_callback` ‚Üí `broadcast_all|winner|test`
  - `admin_support` ‚Üí `handle_admin_support_callback` ‚Üí `support_reply_{id}` | `support_close_{id}`
  - `admin_settings` ‚Üí `handle_admin_settings_callback` ‚Üí `settings_*` (–æ—á–∏—Å—Ç–∫–∞ –∑–∞—è–≤–æ–∫, —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ, —Ç–∏–∫–µ—Ç—ã)
  - –†–æ–∑—ã–≥—Ä—ã—à: `confirm_winner`, `select_new_winner`, `cancel_winner`

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –í —Ç–µ–∫—Å—Ç–µ –∏ —à–∞–±–ª–æ–Ω–∞—Ö –º–æ–≥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–æ–ø. –ø–æ–ª—è; –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î.
- –ü—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ª–∏–º–∏—Ç—ã Telegram; –≤–æ–∑–º–æ–∂–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ–µ –Ω–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (–æ—à–∏–±–∫–∏ 400/403, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏). –ü—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–æ–π—á–∏–≤ –∫ 429 (backoff).

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ä–∞–∑–¥–µ–ª –æ –¥–æ—Ä–∞–±–æ—Ç–∫–∞—Ö/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ ‚Äî –¥–∞–π—Ç–µ –≤–≤–æ–¥–Ω—ã–µ, –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–ª–∞–Ω –∏ —Ä–µ–∞–ª–∏–∑—É–µ–º.
